<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Basic concepts before start - Programmatic submissions</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Basic concepts before start | Programmatic submissions</title> <meta name="generator" content="Jekyll v4.3.1" /> <meta property="og:title" content="Basic concepts before start" /> <meta property="og:locale" content="en_US" /> <link rel="canonical" href="http://localhost:4000/docs/introduction/introduction.html" /> <meta property="og:url" content="http://localhost:4000/docs/introduction/introduction.html" /> <meta property="og:site_name" content="Programmatic submissions" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Basic concepts before start" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","headline":"Basic concepts before start","url":"http://localhost:4000/docs/introduction/introduction.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/" class="site-title lh-tight"> Programmatic submissions </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/docs/docs.html" class="nav-list-link">Submission guidelines</a><ul class="nav-list "><li class="nav-list-item active"><a href="http://localhost:4000/docs/introduction/introduction.html" class="nav-list-link active">Basic concepts before start</a></li><li class="nav-list-item "><a href="http://localhost:4000/docs/create_a_project/create_a_project.html" class="nav-list-link">Create a project</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Programmatic submissions" aria-label="Search Programmatic submissions" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/ebi-ait/ingest-programmatic-submissions" class="site-button" target="_blank" rel="noopener noreferrer" > Edit these Docs on GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/docs/docs.html">Submission guidelines</a></li> <li class="breadcrumb-nav-list-item"><span>Basic concepts before start</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 class="no_toc" id="programmatic-submissions"> <a href="#programmatic-submissions" class="anchor-heading" aria-labelledby="programmatic-submissions"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Programmatic submissions </h1> <h2 class="no_toc" id="purpose-of-this-document"> <a href="#purpose-of-this-document" class="anchor-heading" aria-labelledby="purpose-of-this-document"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Purpose of this document </h2> <p>This document is intended to give an introduction to the HCA ingest service, specifically targeting data and metadata in the system and how they interact in the ingest ecosystem of data.</p> <p>These documents will be coupled with a set of python notebooks, which will show examples of how to interact with the data.</p> <p>This is the <strong>introductory</strong> doc, which will explain the basics behind the metadata schema and the shape/content of the responses the user will obtain interacting with it.</p> <h2 class="no_toc" id="terminology"> <a href="#terminology" class="anchor-heading" aria-labelledby="terminology"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Terminology </h2> <ul> <li>HCA: Human Cell Atlas</li> <li>DCP: Data Coordination Platform</li> <li>Project: In the context of the HCA DCP Ingest Service, the term <code class="language-plaintext highlighter-rouge">project</code> may have one of 2 meanings: <ol> <li>When referring to metadata, the JSON file that contains the metadata about a project</li> <li>When referring to a submission/dataset, these 3 terms can be used interchangeably to describe a set of data and metadata that make sense when put together (e.g. all the data from a paper and the metadata that describes it)</li> </ol> </li> <li>Entity: In the HCA, an entity is used to describe</li> <li>Experimental graph: Representation of the experimental model and the relationships between all entities (e.g. provenance)</li> <li>Subgraph: Minimum unit an experimental graph can be broken down to while still being useful (e.g. All the metadata pieces needed to understand a set of fastq files)</li> <li>Ingest: Interchangeable with <code class="language-plaintext highlighter-rouge">Ingest Service</code> and <code class="language-plaintext highlighter-rouge">Ingest Platform</code></li> <li>Ontologised: When referred to a field, that it gets validated against a specific ontology.</li> </ul> <h2 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents </h2> <ol id="markdown-toc"> <li><a href="#understanding-the-metadata-schema" id="markdown-toc-understanding-the-metadata-schema">Understanding the metadata schema</a> <ol> <li><a href="#structure" id="markdown-toc-structure">Structure</a></li> </ol> </li> <li><a href="#the-hca-dcp-ingestion-service" id="markdown-toc-the-hca-dcp-ingestion-service">The HCA-DCP Ingestion Service</a> <ol> <li><a href="#what-is-the-hca-dcp-ingestion-service" id="markdown-toc-what-is-the-hca-dcp-ingestion-service">What is the HCA-DCP Ingestion Service</a></li> <li><a href="#what-constitutes-a-projectsubmission-in-ingest" id="markdown-toc-what-constitutes-a-projectsubmission-in-ingest">What constitutes a project/submission in Ingest</a></li> <li><a href="#how-to-interact-with-ingest-the-api" id="markdown-toc-how-to-interact-with-ingest-the-api">How to interact with Ingest: the API</a></li> </ol> </li> <li><a href="#understanding-the-json-files-in-the-system" id="markdown-toc-understanding-the-json-files-in-the-system">Understanding the JSON files in the system</a> <ol> <li><a href="#metadata-validation" id="markdown-toc-metadata-validation">Metadata validation</a> <ol> <li><a href="#ontologised-fields" id="markdown-toc-ontologised-fields">Ontologised fields</a></li> <li><a href="#other-type-of-fields" id="markdown-toc-other-type-of-fields">Other type of fields</a></li> </ol> </li> <li><a href="#api-specification" id="markdown-toc-api-specification">API specification</a> <ol> <li><a href="#content" id="markdown-toc-content">content</a></li> <li><a href="#_links" id="markdown-toc-_links">_links</a></li> <li><a href="#system-specific-fields" id="markdown-toc-system-specific-fields">System-specific fields</a></li> <li><a href="#more-information" id="markdown-toc-more-information">More information</a></li> </ol> </li> </ol> </li> <li><a href="#before-you-start-the-practical-part" id="markdown-toc-before-you-start-the-practical-part">Before you start the practical part</a></li> </ol> <h2 id="understanding-the-metadata-schema"> <a href="#understanding-the-metadata-schema" class="anchor-heading" aria-labelledby="understanding-the-metadata-schema"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Understanding the metadata schema </h2> <p>The metadata schema is the staple of how data is interpreted in the system; it defines the content, validation rules and structure of all the metadata that is in the system. For the Human Cell Atlas Data Coordination Platform, a JSON schema was chosen to define the metadata in the system. For full details, please refer to the <a href="https://github.com/HumanCellAtlas/metadata-schema/blob/master/docs/metadata_slo.md">metadata schema SLO</a> and <a href="https://github.com/HumanCellAtlas/metadata-schema/blob/master/docs/rationale.md">rationale</a> documents.</p> <h3 id="structure"> <a href="#structure" class="anchor-heading" aria-labelledby="structure"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Structure </h3> <p>The metadata schema is structured as stated in the <a href="https://github.com/HumanCellAtlas/metadata-schema/blob/master/docs/structure.md#metadata-entity-model">metadata entity model</a> section of the <a href="https://github.com/HumanCellAtlas/metadata-schema/blob/master/docs/structure.md">structure.md</a> document of the metadata schema repository.</p> <p>For the purpose of this guide, “type entity” will be used to refer to the subtypes of the 5 major entities in the metadata model:</p> <ul> <li>Project: Contains information about the project, such as manuscript metadata, grants involved, contributors of the project etc</li> <li>File: Contains information about the data files, such as filename, description of the content, etc</li> <li>Biomaterial: Contains information about each of the biological materials used in the project, such as cell suspensions, specimens, etc.</li> <li>Project: Contains information about each of the protocols used on each step of the experiment.</li> <li>Process: Contains information about a process; usually, we don’t need to worry a lot about processes, as they are used as intermediates in the system to create the relationships in between the other elements.</li> </ul> <p align="center"> <img src="https://raw.githubusercontent.com/HumanCellAtlas/metadata-schema/master/docs/images/entities.png" /> </p> <p>The schemas accepted for each of the major entities can be found always under the url <code class="language-plaintext highlighter-rouge">https://github.com/HumanCellAtlas/metadata-schema/tree/master/json_schema/type/{major_entity}</code>, substituting <code class="language-plaintext highlighter-rouge">{type}</code> with any of the major types described previously (e.g. https://github.com/HumanCellAtlas/metadata-schema/tree/master/json_schema/type/biomaterial)</p> <h2 id="the-hca-dcp-ingestion-service"> <a href="#the-hca-dcp-ingestion-service" class="anchor-heading" aria-labelledby="the-hca-dcp-ingestion-service"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> The HCA-DCP Ingestion Service </h2> <h3 id="what-is-the-hca-dcp-ingestion-service"> <a href="#what-is-the-hca-dcp-ingestion-service" class="anchor-heading" aria-labelledby="what-is-the-hca-dcp-ingestion-service"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> What is the HCA-DCP Ingestion Service </h3> <p>The HCA-DCP is composed of several pieces of software that talk to each other, to ensure that the data is ingested, stored and shared.</p> <p>The HCA-DCP Ingestion service constitutes that first step, and it’s on itself the <code class="language-plaintext highlighter-rouge">entry door</code> of the data to the DCP; this is the interface that connects the users (Data scientists, data generators) with the <a href="https://data.humancellatlas.org/">data portal</a>.</p> <p>In order to provide with that service, the Ingest Team has defined a data model, based around the entities in the metadata schema. In this model, we have a project (See <a href="#terminology">terminology, project, meaning i</a>), which is usually associated with one or more papers and has information associated with it (see <a href="https://github.com/HumanCellAtlas/metadata-schema/tree/master/json_schema/type/project/project.json">ingest project schema</a> for more information). Within that project, you have 1 or more submissions, and each can be understood as a “data envelope” that packs up a minimal amount of information that needs to be delivered together to e.g. the DCP data portal.</p> <p>As any service, it has different environments for different purposes:</p> <ul> <li>production: https://api.ingest.archive.data.humancellatlas.org/</li> <li>staging: https://api.ingest.staging.archive.data.humancellatlas.org/</li> <li>dev: https://api.ingest.dev.archive.data.humancellatlas.org/</li> </ul> <p>Each one of these environments points to a different deployment of the platform, and ultimately, a good rule of thumb is that any dataset that needs to be tested first should be brokered first through staging, since the output will not disrupt any of the services downstream.</p> <h3 id="what-constitutes-a-projectsubmission-in-ingest"> <a href="#what-constitutes-a-projectsubmission-in-ingest" class="anchor-heading" aria-labelledby="what-constitutes-a-projectsubmission-in-ingest"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> What constitutes a project/submission in Ingest </h3> <p>In the HCA, we understand a project as the <strong>minimum expression of data and metadata that is packed together to explain an experimental design</strong> and its outputs.</p> <p>Below you can find an example of a whole project with a submission, and how the entities relate to each other: you can click on each of the entities to be redirected to the folder of the metadata schema that contains all the type entities of that class.</p> <div class="mxgraph" style="max-width:100%;border:1px solid transparent;" data-mxgraph="{&quot;highlight&quot;:&quot;#0000ff&quot;,&quot;nav&quot;:true,&quot;resize&quot;:true,&quot;toolbar&quot;:&quot;zoom layers tags lightbox&quot;,&quot;edit&quot;:&quot;_blank&quot;,&quot;xml&quot;:&quot;&lt;mxfile host=\&quot;app.diagrams.net\&quot; modified=\&quot;2022-09-07T15:30:50.530Z\&quot; agent=\&quot;5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36\&quot; etag=\&quot;cRX-88NFg0As2ERGT6PV\&quot; version=\&quot;20.2.3\&quot; type=\&quot;google\&quot;&gt;&lt;diagram id=\&quot;Vtwi83Y6I7b7ka8JpLpU\&quot; name=\&quot;Page-1\&quot;&gt;7Vtbc5s6EP41fmwGxNWPuefhtEknc6btU0eAbJQA8gg5tvvrj8TNIGSMfXAcO00eglY3tN/ut1qJjIzreHlP4Sz8SgIUjYAWLEfGzQgA3XQA/yMkq1xiunYumFIcFI3Wgmf8BxVCrZDOcYDSRkNGSMTwrCn0SZIgnzVkkFKyaDabkKg56wxOUUvw7MOoLf2BAxbmUhc4a/kDwtOwnFm3x3lNDMvGxUrSEAZkURMZtyPjmhLC8qd4eY0iobxSL3m/uw211YtRlDBFh39TRB+9F6EToEXQ47hkjfJuEU5e83LImFDlpegI7qaYhXPvwicxLzzMY5iIaS9ZBFMuiBGDAWTwS+qHKIZcwihCogKmDFH+8JKS5Pe6djUTtTNK8vcAtff/MbG8X7cv9+b9w3f69idaTLD5xaj0Uq03ZasSC0rmSYBEf21kXC1CzNDzDPqidsGtj8tCFotl6vxxgqPomkSEZn2NyWQCfJ/LU0bJK6rVBLZnWzavyd/vDVGGlht1rNfe8B4RrhG64k2KDm6BdWnsRXGxthynNIewZjWmVghhYa3TauQ1oELNuVLKYg1itY0odWwW64TRvNDrUx2fmr65HlhTqU3lJSRBkqYLEYzwNOFFn+uN24VxJbSKuVddFhUxDgIxjRLFJs4DwGLqW3GxFbAYu6PSDwK7BUFL95wtZuIxIP48zpa5zeC9XGv/eJs8wBK/Qk4SVpPnPyrPsLOfYSAYNxHQNYVraAoMqkAwOAhOC4TnuRfjNMUkuU3eUEQEeZ2rSxgSVel6GxBdxVV7OMWmUHSFCY+SiGIYHSEqefLsndbidkYmLuAbEgFe6bd+RObBzlEqsJAbmCpfdIFnDOWLlfOV2Ns9sXcHCVObzIGHIR+l6XE2KOuZO81g3NMMdoMd6Rx4RwX72HYMOBDswJJgd/uFQfMdNye6vj00oiS4FDv7zMsg52u/qdwmV6IlZj/F84XrWEX5V1YuSzfLWtObVa3wxNmBL1XQdS5L+LJ/1gu1kURxPVRWKsfKl4CCVqohQceXSebURz15qAZxDUJLAWEpoyiCDL81X0OFazHDE8EJqwUNKYq3CCF//aJXPXmRBpJNEcgbYAbpFLHWQJmZVcveP/broGVm3zjFfD3feA9kzncOtgfu4HdGfHKMWD9rTN1tGt05aBnfQ7SEU8JxvJrVSKKQVrwB+oSCJSrPPZR5K7I35K3O2NOGsg4TcBLbth90rEHsY//g0E5dBwsO9dCgdwaGAcm8YWsnzOZyLiEPdGg2tz4dm8saV5xoqCznkyZvut3J6aeVvRkWaGJv2S3sD5i99XTJ9unKQFStj/rv4ftS9dEYWN+yDe7LwIZz5P20+9kYWIZOtZ8eiIF7QjDeyeMKrQYwDTO16E1UhPwJMq7pJJMAbX1CXN6DgbaPVvlxmWz3z5Gzkpxwf3QHtuQt1L4ObNrmXg7M4YSrWrOZaJDu5uKbIvwdjtARQvukmrbT3mt3qF15WkJYj/M4D/qv08yWH+eMrxZVbkBfH3kvzDIzvdAsRdSHyJ0oMzTbd5E3GYZvHJlvrDbfuApD14e5WjzlM9ucCE/00NaWz20+4KEtMD7CZm/fw9n/FXh6JPmlMnIG78top3saYJrSQPKW58B7UdA+JdLPey9qyxc7x96Lgr8fOBigjYHyAwf9YB84gL9fODQQMdqIDPWFQ09A2llyV5w8SIrWN7AdKwxViJSolZcOu4Yhx94y0N5h6LTvt0D3Jwzneb9ljY1mhPyAt1vlXGdzu9WwtHcnEsfUpCvNvXe0tiEP9d43XEb7s5gzP19V6Pxwd1y8uP4OP8ds/d8Mxu1/&lt;/diagram&gt;&lt;/mxfile&gt;&quot;}"></div> <script type="text/javascript" src="https://viewer.diagrams.net/js/viewer-static.min.js"></script> <p>Most of the relationships allowed by the system are <code class="language-plaintext highlighter-rouge">M:N</code>; what this means, is that given the following:</p> <ul> <li>Biomaterial/file</li> <li>Process</li> </ul> <p>All of the following scenarios are possible</p><pre><code class="language-mermaid">graph TD;
A[Specimen 1]--&gt;B[Dissociation process];
C[Specimen 2]--&gt;B;
B--&gt;D[Pooled cell suspension];

E[Specimen 1]--&gt;F[Dissociation process]
E--&gt;I[Dissociation process 2]
F--&gt;H[Cell suspension 1]
I--&gt;G[Cell suspension 2]
</code></pre><pre><code class="language-mermaid">graph TD;
A[Cell suspension 1]--&gt;B[Sequencing process]
B--&gt;C[Read 1 sequence file]
B--&gt;D[Read 2 sequence file]
B--&gt;E[Index 1 sequence file]
B--&gt;F[Index 2 sequence file]
</code></pre><p>A couple of general rules on how experiments are modeled in the HCA:</p> <ul> <li>The input of a process can be one/several biomaterial/files</li> <li>The output of a process will be either one biomaterial or one/several files</li> <li>A process is unique and cannot be used multiple times.</li> <li>(Not shown in figure) A process can have as many protocols attached as needed</li> <li>Protocols are attached independently of inputs/outputs</li> </ul> <p>Please take into account that there are exceptions; these rules apply to our modelling decisions rather than to limitations of our system, so if you feel that these rules do not apply to your experiment, please contact us at <a href="mailto:wrangler-team@data.humancellatlas.org">the wrangler email</a>.</p> <h3 id="how-to-interact-with-ingest-the-api"> <a href="#how-to-interact-with-ingest-the-api" class="anchor-heading" aria-labelledby="how-to-interact-with-ingest-the-api"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> How to interact with Ingest: the API </h3> <p>As any service that stores and surfaces data, the HCA DCP Ingestion service has several ways of floating the metadata. In these guidelines, I will mainly focus on the API, as it will be the only way that the notebook will teach to interact with ingest.</p> <p>The Ingest API is a RESTful API that is formatted in the JSON Hypertext Application Language (HAL), which makes it so that the content returned by the API can be consistently accessed. You can find more information on the consistent fields in the <a href="#extra-information">API specification</a> section.</p> <h2 id="understanding-the-json-files-in-the-system"> <a href="#understanding-the-json-files-in-the-system" class="anchor-heading" aria-labelledby="understanding-the-json-files-in-the-system"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Understanding the JSON files in the system </h2> <p>Metadata files in the system are stored as JSON entries; more concretely, they are stored as entries in a MongoDB database and exposed through the API. In these guidelines, it will be shown how to use the Ingest client to interact with the API; the client just provides an easy-to-use CLI interface to interact.</p> <p>The next documents will deal with each <code class="language-plaintext highlighter-rouge">entity type</code> individually, so what you could expect here is a general understanding that may apply to all the entities, e.g. the specific HAL-related fields that populate the API responses.</p> <h3 id="metadata-validation"> <a href="#metadata-validation" class="anchor-heading" aria-labelledby="metadata-validation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Metadata validation </h3> <p>The Ingest Service validates the metadata that comes into the system by using the <a href="https://github.com/ebi-ait/ingest-validator">ingest-validator</a>. The platform does all the work for the user, so you don’t need to worry about triggering anything.</p> <h4 id="ontologised-fields"> <a href="#ontologised-fields" class="anchor-heading" aria-labelledby="ontologised-fields"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Ontologised fields </h4> <p>One of the main reasons why Ingest uses a custom JSON schema validation is that many fields are <code class="language-plaintext highlighter-rouge">ontologised</code>. In a JSON file, you can recognise an ontologised term because it always presents the next fields:</p> <ul> <li><code class="language-plaintext highlighter-rouge">text</code>: Free text, for the user to input what’s closest to what they are trying to describe (e.g. <code class="language-plaintext highlighter-rouge">Disease status</code>)</li> <li><code class="language-plaintext highlighter-rouge">ontology</code>: An identifier, in the form of PREFIX:ACCESSION (e.g. PATO:000461). This is the field that will be validated against the ontology.</li> <li><code class="language-plaintext highlighter-rouge">ontology_label</code>: The label that is officially assigned to that ontology term.</li> </ul> <p>An example for disease status:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"text"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The text for the term as the user provides it."</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"user_friendly"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Disease"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"example"</span><span class="p">:</span><span class="w"> </span><span class="s2">"type 2 diabetes mellitus; normal"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"ontology"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"An ontology term identifier in the form prefix:accession."</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"graph_restriction"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"ontologies"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"obo:mondo"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"obo:efo"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"obo:hp"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"classes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"MONDO:0000001"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"PATO:0000461"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"HP:0000118"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"relations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"rdfs:subClassOf"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"direct"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"include_self"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"user_friendly"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Disease ontology ID"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"example"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONDO:0005148; PATO:0000461; HP:0001397"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"ontology_label"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The preferred label for the ontology term referred to in the ontology field. This may differ from the user-supplied value in the text field."</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"user_friendly"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Disease ontology label"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"example"</span><span class="p">:</span><span class="w"> </span><span class="s2">"type 2 diabetes mellitus; normal"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p>A couple of key notes about ontologised fields:</p> <ul> <li>The validator will always look up for terms that are within the <a href="https://ontology.archive.data.humancellatlas.org/index"><strong>HCAO Ontology</strong></a>.</li> <li>The <code class="language-plaintext highlighter-rouge">relations</code> field defines which relationships are accepted under the class (e.g. must be subclass of <code class="language-plaintext highlighter-rouge">disease</code>)</li> <li>The schemas to look up for the ontology restrictions can be found under the <a href="https://github.com/HumanCellAtlas/metadata-schema/tree/master/json_schema/module/ontology">module/ontology</a> folder in the HCA Metadata Schema repository.</li> </ul> <h4 id="other-type-of-fields"> <a href="#other-type-of-fields" class="anchor-heading" aria-labelledby="other-type-of-fields"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Other type of fields </h4> <p>As with any JSON schema, fields can contain many types of values; to find a description of the types of values accepted, please refer to the <a href="https://json-schema.org/understanding-json-schema/reference/type.html">type-specific keywords</a> documentation in the official JSON Schema webpage.</p> <h3 id="api-specification"> <a href="#api-specification" class="anchor-heading" aria-labelledby="api-specification"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> API specification </h3> <p>As a general rule (Except for the project metadata), the user should only worry about the <code class="language-plaintext highlighter-rouge">content</code> field, which is the part of the response that will contain the submitted metadata, and the CLI works as an interface so there’s no need to know the rest of the fields.</p> <p>However, in this section, there will be a brief explanation on what fields you will find if you were to inspect the responses.</p> <h4 id="content"> <a href="#content" class="anchor-heading" aria-labelledby="content"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> content </h4> <p>This is the metadata that the user has submitted for that specific entity; for a more in-depth explanation, please refer to the specific documents about the 5 types of entities.</p> <h4 id="_links"> <a href="#_links" class="anchor-heading" aria-labelledby="_links"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> _links </h4> <p>The content of this field contains all the URIs needed to navigate and interact with the API. These links contain a reference to an endpoint that is related to this entity, which can be used to refer to <code class="language-plaintext highlighter-rouge">relationships</code> (e.g. inputToProcesses, self, project, biomaterials, etc) or be used as the URI for a POST/PATCH/PUT request to modify the entity or its relationships.</p> <p>The specific fields will not be detailed here, as they are slightly different for each entity, but there will be an in-depth explanation on the guidelines section about linking entities together.</p> <p>As a note, all the links are expressed under an <code class="language-plaintext highlighter-rouge">href</code> field, which signifies that is a hyperlink. For example:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"_links"</span><span class="p">:</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"url_to_self"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <h4 id="system-specific-fields"> <a href="#system-specific-fields" class="anchor-heading" aria-labelledby="system-specific-fields"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> System-specific fields </h4> <p>These fields will be available if you inspect the response of any object in the system: you do not need to worry about them, as Ingest will fill them automatically. For the sake of clarity, here is a brief description for them.</p> <ul> <li><code class="language-plaintext highlighter-rouge">submissionDate</code>: Date of submission of the JSON file. This is the date the entity was first created in the system</li> <li><code class="language-plaintext highlighter-rouge">updateDate</code>: Last time the JSON file was updated</li> <li><code class="language-plaintext highlighter-rouge">user</code>: ID of the user who created this entity.</li> <li><code class="language-plaintext highlighter-rouge">lastModifiedUser</code>: ID of the user who last modified this entity</li> <li><code class="language-plaintext highlighter-rouge">type</code>: Type of entity, must be one of the 5 specified in the <a href="#structure">structure</a> section</li> <li><code class="language-plaintext highlighter-rouge">uuid</code>: Universally Unique IDentifier for the entity; assigned at creation</li> <li><code class="language-plaintext highlighter-rouge">events</code>: <span style="color:red"><strong><em>OUTDATED</em></strong></span> Recording of events that the entity have gone through.</li> <li><code class="language-plaintext highlighter-rouge">firstDcpVersion</code>: First date that the document was created</li> <li><code class="language-plaintext highlighter-rouge">dcpVersion</code>: Last time the JSON file was updated; same as <code class="language-plaintext highlighter-rouge">updateDate</code></li> <li><code class="language-plaintext highlighter-rouge">contentLastModified</code>: Last time the METADATA (content) was updated</li> <li><code class="language-plaintext highlighter-rouge">accession</code>: Accession(s) that is/are associated with this entity</li> <li><code class="language-plaintext highlighter-rouge">validationState</code>: Validation state of the entity; May be <code class="language-plaintext highlighter-rouge">draft</code>, <code class="language-plaintext highlighter-rouge">metadata valid</code>, <code class="language-plaintext highlighter-rouge">metadata invalid</code></li> <li><code class="language-plaintext highlighter-rouge">validationErrors</code>: Collection of validationErrors, associated with the JSON schema validation</li> <li><code class="language-plaintext highlighter-rouge">graphValidationErrors</code>: Collection of validationErrors, associated with the Ingest graph validator (Covered in a later section)</li> <li><code class="language-plaintext highlighter-rouge">isUpdate</code>: <span style="color:red"><strong><em>OUTDATED</em></strong></span> If this entity is an update. This was used when duplicates were used to update the entities in the system.</li> <li><code class="language-plaintext highlighter-rouge">linked</code>: If the entity is linked in the system with other entities (e.g. a Biomaterial to a process).</li> </ul> <h4 id="more-information"> <a href="#more-information" class="anchor-heading" aria-labelledby="more-information"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> More information </h4> <p>If you are interested in learning more about the API endpoints and the metadata that each presents, you can go to the root of the API (Stated <a href="#what-is-the-hca-dcp-ingestion-service">here</a>) and travel the endpoints. Please be advised that for most of the endpoints, you will need to retrieve a token. More information on how to obtain a token <a href="https://ebi-ait.github.io/hca-ebi-dev-team/operations_tasks/api_token.html">here</a>.</p> <h2 id="before-you-start-the-practical-part"> <a href="#before-you-start-the-practical-part" class="anchor-heading" aria-labelledby="before-you-start-the-practical-part"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Before you start the practical part </h2> <p>The next steps are only needed if you plan to work with code outside of the Google Colab Notebooks:</p> <ul> <li>Create a virtual environment and activate it</li> <li>Install hca-ingest: <code class="language-plaintext highlighter-rouge">pip3 install hca-ingest</code></li> </ul> <hr> <footer> <div class="d-flex mt-2"> <p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/morphic-bio/homepage/edit/main/.//docs/introduction/introduction.md" id="edit-this-page">Edit this page on GitHub</a> </p> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
